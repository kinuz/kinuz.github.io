{"data":{"site":{"siteMetadata":{"title":"Kinuz Blog","subtitle":"","copyright":"Â© All rights reserved.","author":{"name":"Kinuz","twitter":"#"},"disqusShortname":"NuzHome","url":"https://kinuz.netlify.com"}},"markdownRemark":{"id":"59bc6138-aa98-58f3-9043-fe765923ec07","html":"<ul>\n<li>create yaml file for portainer stack.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3.7'</span>\n\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">agent</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> portainer/agent\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">AGENT_CLUSTER_ADDR</span><span class=\"token punctuation\">:</span> tasks.portainer_agent\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> /var/run/docker.sock<span class=\"token punctuation\">:</span>/var/run/docker.sock\n      <span class=\"token punctuation\">-</span> /var/lib/docker/volumes<span class=\"token punctuation\">:</span>/var/lib/docker/volumes\n    <span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> portainer<span class=\"token punctuation\">-</span>net\n    <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">mode</span><span class=\"token punctuation\">:</span> global\n  <span class=\"token key atrule\">management</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> portainer/portainer\n    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">-</span>H tcp<span class=\"token punctuation\">:</span>//tasks.portainer_agent<span class=\"token punctuation\">:</span>9001 <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>tlsskipverify\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">'9000:9000'</span>\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">TZ</span><span class=\"token punctuation\">:</span> Asia/Seoul\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> portainer_data<span class=\"token punctuation\">:</span>/data\n    <span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> portainer<span class=\"token punctuation\">-</span>net\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> nginx_config<span class=\"token punctuation\">[</span><span class=\"token string\">'network_name'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">mode</span><span class=\"token punctuation\">:</span> replicated\n      <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n      <span class=\"token key atrule\">placement</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">constraints</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> node.role == manager\n\n<span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">portainer-net</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">driver</span><span class=\"token punctuation\">:</span> overlay\n\n\n<span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n  portainer_data<span class=\"token punctuation\">:</span></code></pre></div>\n<ul>\n<li>set manager node as working environment</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">eval</span> <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span>docker-machine <span class=\"token function\">env</span> myvm1<span class=\"token variable\">)</span></span>\"</span></code></pre></div>\n<ul>\n<li>deploy portainer stack to swarm cluster.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker stack deploy -c portainer.yml portainer</code></pre></div>","fields":{"tagSlugs":["/tags/docker/"]},"frontmatter":{"title":"Portainer - Making Docker Management Easy.","tags":["docker"],"date":"2019-04-10T23:01:57.000Z","description":"Build and manage your Docker environments with ease today.","refs":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/docker/2019/04/11/portainer-making-docker-management-easy"}}